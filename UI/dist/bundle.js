(()=>{"use strict";let t=1,e=2022;const a=()=>""+t++,n=()=>""+e++,r=[{id:"77",text:"В рамках спецификации современных стандартов, непосредственные участники технического прогресса ассоциативно распределены по отраслям.#datamola2022",createdAt:new Date("2022-03-27T02:17:46"),author:"Мария",comments:[{id:n(),text:"Круто",createdAt:new Date("2022-02-19T23:00:05"),author:"Иван"},{id:n(),text:"Да",createdAt:new Date("2022-02-19T23:06:15"),author:"Лиза"},{id:n(),text:"Сложно сказать, почему так",createdAt:new Date("2022-02-19T23:08:25"),author:"Den"},{id:n(),text:"В точку",createdAt:new Date("2022-02-19T23:10:55"),author:"Виталий"}]},{id:a(),text:"Ясность нашей позиции очевидна: базовый вектор развития #development позволяет оценить значение поэтапного и последовательного развития общества.",createdAt:new Date("2022-02-28T23:50:01"),author:"Ирина",comments:[{id:n(),text:"Инцидент не исчерпан: ночь оказалась долгой.",createdAt:new Date("2022-02-25T23:07:15"),author:"Nick"},{id:n(),text:"Есть над чем задуматься!",createdAt:new Date("2022-02-25T23:12:33"),author:"Диана"},{id:n(),text:"Многие известные личности лишь добавляют фракционных разногласий и своевременно верифицированы.",createdAt:new Date("2022-02-25T23:16:56"),author:"Женёк"},{id:n(),text:"Тяжёлое машиностроение - это вам не полуночный пёсий вой.",createdAt:new Date("2022-02-26T23:06:26"),author:"Алиса"},{id:n(),text:"Новая парадигма реальности: преступность никогда не была такой неорганизованной.",createdAt:new Date("2022-02-27T23:02:24"),author:"Марк"}]},{id:a(),text:"Вот вам яркий пример современных тенденций - семантический разбор внешних противодействий обеспечивает широкому кругу (специалистов) участие в формировании инновационных методов управления процессами.",createdAt:new Date("2022-02-26T23:15:44"),author:"Евгений",comments:[{id:n(),text:"Инцидент не исчерпан: ночь оказалась долгой.",createdAt:new Date("2022-02-27T05:26:26"),author:"Счастливчик"}]},{id:a(),text:"Ясность нашей позиции очевидна: базовый вектор развития #development позволяет оценить значение поэтапного и последовательного развития общества.",createdAt:new Date("2022-02-28T14:33:24"),author:"Gleb",comments:[{id:n(),text:"Не следует забывать, что был сорван доклад председателя совхоза.",createdAt:new Date("2022-02-28T15:23:02"),author:"Марина"},{id:n(),text:"Шампунь лошадиная сила - заказывайте по номеру +375230230509",createdAt:new Date("2022-02-28T17:23:22"),author:"Продажник"}]},{id:a(),text:"А ещё стремящиеся вытеснить традиционное производство, нанотехнологии, превозмогая сложившуюся непростую экономическую ситуацию, объединены в целые кластеры себе подобных.#производство",createdAt:new Date("2022-03-01T09:13:33"),author:"Виктория Смит",comments:[]},{id:a(),text:"А также предприниматели в сети интернет, вне зависимости от их уровня, должны быть обнародованы. Прежде всего, глубокий уровень погружения, в своём классическом представлении, допускает внедрение экспериментов, поражающих по своей масштабности и грандиозности.",createdAt:new Date("2022-03-02T18:27:18"),author:"Тема Николаев",comments:[{id:n(),text:"Логотип крупнейшей компании по производству мыльных пузырей не стал ограничивающим фактором.",createdAt:new Date("2022-03-02T23:10:43"),author:"Денис"},{id:n(),text:"Давайте разбираться: склады ломятся от зерна.",createdAt:new Date("2022-03-02T23:50:46"),author:"Дина"}]},{id:a(),text:"Каждый из нас понимает очевидную вещь: современная методология разработки требует от нас анализа прогресса профессионального сообщества.",createdAt:new Date("2022-03-01T18:27:18"),author:"Евгений",comments:[{id:n(),text:"Частотность поисковых запросов ни к чему нас не обязывает",createdAt:new Date("2022-03-04T23:10:43"),author:"Гражданин"}]},{id:a(),text:"Задача организации, в особенности же перспективное планирование не даёт нам иного выбора, кроме определения экспериментов, поражающих по своей масштабности и грандиозности. Таким образом, укрепление и развитие внутренней структуры предполагает независимые способы реализации новых предложений.",createdAt:new Date("2022-02-21T10:22:44"),author:"Артем",comments:[{id:n(),text:"Как бы то ни было, новая модель организационной деятельности разочаровала",createdAt:new Date("2022-02-21T14:26:26"),author:"Счастливчик"},{id:n(),text:"Меня тоже",createdAt:new Date("2022-02-22T05:25:44"),author:"Kylie"},{id:n(),text:"Как бы то ни было, новая модель организационной деятельности разочаровала",createdAt:new Date("2022-02-22T14:35:24"),author:"Ден"}]},{id:a(),text:"Повседневная практика показывает, что консультация с широким активом, в своём классическом представлении, допускает внедрение позиций, занимаемых участниками в отношении поставленных задач.",createdAt:new Date("2022-02-16T23:15:44"),author:"Лиза",comments:[{id:n(),text:"В провинциях ещё есть чем поживиться",createdAt:new Date("2022-02-27T05:26:26"),author:"Счастливчик"}]},{id:a(),text:" Как принято считать, сделанные на базе интернет-аналитики выводы представляют собой не что иное, как квинтэссенцию победы маркетинга над разумом и должны быть указаны как претенденты на роль ключевых факторов.",createdAt:new Date("2022-02-26T23:15:44"),author:"Москва",comments:[{id:n(),text:"Окрестности Тулы оросил старческий скрип Амстердама",createdAt:new Date("2022-02-27T05:26:26"),author:"Счастливчик"}]},{id:a(),text:" Высококачественный прототип будущего проекта даёт нам право принимать самостоятельные решения",createdAt:new Date("2022-03-13T22:22:44"),author:"Петр",comments:[]},{id:a(),text:"Зима близко",createdAt:new Date("2022-03-14T04:18:03"),author:"snow",comments:[{id:n(),text:"Ничего ты не знаешь...",createdAt:new Date("2022-03-14T05:33:10"),author:"khaleesi"}]},{id:a(),text:"В частности, синтетическое тестирование #data позволяет оценить значение приоритизации разума над эмоциями.",createdAt:new Date("2022-02-23T13:15:44"),author:"Геннадий",comments:[{id:n(),text:"Что за тестирование?",createdAt:new Date("2022-02-24T07:35:02"),author:"Вероника"},{id:n(),text:"Нынче никто не может себе позволить инициировать грохот грома грядущих изменений",createdAt:new Date("2022-02-24T12:15:26"),author:"Алекс"},{id:n(),text:"выбранный нами инновационный путь развеял последние сомнения",createdAt:new Date("2022-02-24T02:26:26"),author:"Edward"},{id:n(),text:"Всех мужчин с праздником",createdAt:new Date("2022-02-23T16:26:26"),author:"Alice"}]},{id:a(),text:" А также многие известные личности ассоциативно распределены по отраслям.",createdAt:new Date("2022-03-13T23:15:44"),author:"Катя",comments:[]},{id:a(),text:" Светлый лик правового взаимодействия не позволил союзу развалиться",createdAt:new Date("2022-03-12T20:22:04"),author:"Ирина",comments:[{id:n(),text:"Привет",createdAt:new Date("2022-03-13T02:26:26"),author:"Солнце"},{id:n(),text:"Как дела?",createdAt:new Date("2022-03-13T16:00:29"),author:"Алиса"}]},{id:a(),text:" Мелочь, а приятно: объем доходов населения сократился",createdAt:new Date("2022-03-11T14:44:18"),author:"Мария",comments:[]},{id:a(),text:" Для современного мира повышение уровня гражданского сознания не оставляет шанса для инновационных методов управления процессами.",createdAt:new Date("2022-03-14T18:15:44"),author:"Trojan",comments:[{id:n(),text:"Ничего ты не знаешь...",createdAt:new Date("2022-03-14T19:33:10"),author:"House Targaryen"}]},{id:a(),text:" Акционеры крупнейших компаний неоднозначны и будут объективно рассмотрены соответствующими инстанциями.",createdAt:new Date("2022-03-13T19:12:00"),author:"Ваня",comments:[]},{id:a(),text:" Подтверждено: объем доходов населения сократился",createdAt:new Date("2022-03-12T20:22:08"),author:"Света",comments:[{id:n(),text:"Откуда такая информация?",createdAt:new Date("2022-03-13T02:26:01"),author:"Знаток"},{id:n(),text:"Чем я могу помочь?",createdAt:new Date("2022-03-13T16:59:05"),author:"Алиса"}]},{id:a(),text:" Есть над чем задуматься: цены на бензин начинают падать",createdAt:new Date("2022-03-10T18:07:18"),author:"Rick",comments:[{id:n(),text:"Ура",createdAt:new Date("2022-03-13T22:50:05"),author:"Артем"}]}];class s{static user="";static maxTextLength=280;_twscopy=[];constructor(t){this._twscopy=t||[]}static tweetRules(t){const{keys:e,types:a}=s.validateConfig.tweet,n=s.validateTweetByKeys(t,e),r=s.validateTweetByType(t,a);return n&&r}static commentRules(t){const{keys:e,types:a}=s.validateConfig.comment,n=s.validateTweetByKeys(t,e),r=s.validateTweetByType(t,a);return n&&r}static validateConfig={tweet:{types:{id:t=>"string"==typeof t,text:t=>"string"==typeof t&&t.length<=s.maxTextLength,createdAt:t=>t instanceof Date,author:t=>"string"==typeof t,comments:t=>Array.isArray(t)},keys:["id","text","createdAt","author","comments"]},comment:{types:{id:t=>"string"==typeof t,text:t=>"string"==typeof t&&t.length<=s.maxTextLength,createdAt:t=>t instanceof Date,author:t=>"string"==typeof t},keys:["id","text","createdAt","author"]}};static validateTweetByKeys=(t,e)=>!e.some((e=>!t.hasOwnProperty(e)));static validateTweetByType=(t,e)=>!Object.entries(t).some((([t,a])=>!e[t]||!e[t](a)));static arrayClone(t){if(t)return JSON.parse(JSON.stringify(t))}getPage=(t=0,e=10,a={})=>{let n=s.arrayClone(this._twscopy);a&&(a.author&&(n=n.filter((t=>!!t.author&&t.author.toLowerCase().includes(a.author.toLowerCase())))),a.text&&(n=n.filter((t=>!!t.text&&t.text.toLowerCase().includes(a.text.toLowerCase())))),a.hashtags&&(n=n.filter((t=>!!t.text&&t.text.toLowerCase().includes(`#${a.hashtags.toLowerCase()}`)))),a.dateFrom&&(n=n.filter((t=>t.createdAt>a.dateFrom))),a.dateTo&&(n=n.filter((t=>t.createdAt<a.dateTo))));let r=n.sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)}));return r=r.slice(t,t+e),r};get twscopy(){return this._twscopy}set twscopy(t){0===t.length?this._twscopy=[]:t.forEach((t=>{o.validate(t)&&this._twscopy.push(t)}))}get(t){return this._twscopy.find((e=>e.id===t))}add=t=>{const e={id:a(),text:t,createdAt:new Date,author:s.user,comments:[]};return!!o.validate(e)&&(this._twscopy.push(e),!0)};edit=(t,e)=>{const a=this.get(t);if(o.validate(a))return s.user===a.author&&"string"==typeof e&&e.length<=s.maxTextLength?(a.text=e,!0):a.text};remove(t){const e=this.get(t);if(e){if(s.user===e.author){const e=this._twscopy.findIndex((e=>e.id===t));return this._twscopy.splice(e,1),!0}return!1}return!1}addAll(t){if(!t)return;let e=[];return t.forEach((t=>{o.validate(t)?this._twscopy.push(t):e.push(t)})),e}clear(){this._twscopy=[]}addComment=(t,e)=>{const a=this.get(t),n=new Comment(e);return!!Comment.validate(n)&&(a.comments.push(n),!0)}}class i{constructor(t,e,n,r){this._id=e||a(),this._text=t||"",this._author=r||s.user,this._createAt=n||new Date}get id(){return this._id}set id(t){console.log("can't set id")}get createdAt(){return this._createdAt}set createdAt(t){console.log("can't set a date")}get author(){return this._author}set author(t){console.log("can't set author name")}static validate(t){return!!t&&s.commentRules(t)}}class o{constructor(t,e,a,n,r){this._id=e||uniId(),this._text=t||"",this._author=n||s.user,this._createAt=a||new Date,this._comments=r?r.map((t=>new i(t))):[]}get id(){return this._id}set id(t){console.log("can't set author name")}get createdAt(){return this._createdAt}set createdAt(t){console.log("can't set a date")}get author(){return this._author}set author(t){console.log("can't set author name")}static validate(t){if(t)return Object.keys(t).map((e=>Array.isArray(t[e])?!t[e]||!t[e].length||t[e].every((t=>i.validate(t))):s.tweetRules(t))).every((t=>t))}}const c=t=>{if(!t)return;const e=t=>(t<10&&(t="0"+t),t);return`${e(new Date(t).getDate())}.${e(new Date(t).getMonth()+1)}.${e(new Date(t).getFullYear())}, ${e(new Date(t).getHours())}:${e(new Date(t).getMinutes())}`};new class{constructor(t){this.containerId=t}display(t){if(!t)return"";const e=document.getElementById(this.containerId);e&&(e.innerHTML=t.map((t=>`\n                <li class="list_item"><a class="item_filtration" href="#">${t}</a></li>\n                    <hr>\n            `)).join("\n"))}setAuthors(t){this.display(t)}}("filter").setAuthors(["Ирина","Мария","Евгений","Gleb","Виктория Смит","Тема Николаев","Евгений","Артем","Лиза","Москва","Петр","snow","Геннадий","Катя","Ирина","Мария","Trojan","Ваня","Света","Rick"]);const d=new s([...r]),u=new class{constructor(t){this.containerId=t}display(t){if(!t)return"";const e=document.getElementById(this.containerId);e&&(e.innerHTML=t?`<div class="header_user">${t}</div><button class="btn_blue" type="button_exit">Выйти</button>`:'<div class="header_user">Гость</div> <button class="btn_blue" type="button_exit">Войти</button>')}}("headerview"),h=new class{constructor(t){this.containerId=t}display(t){if(!t)return"";const e=document.getElementById(this.containerId);if(e){const a=s.user;e.innerHTML=t.map((t=>`\n                <article class="twit">\n                <div class="user_info">\n                    <h1 class="user_name">${t.author}</h1>\n                    ${t.author===a?'<span class="user_check">(Вы)</span>':""}\n                </div>\n        \n                <div class="twit_date">${c(t.createdAt)}</div>\n                <p>${t.text}</p>\n        \n                <div class="twit_footer">\n                    <a href="#">\n                    <img src="images/chat.svg" alt="chat">\n                    </a>\n                    <span class="twit_comment_number">${t.comments?t.comments.length:""}</span>\n                    ${t.author===a?' <div class="twit_edit"> <a class="correct" href="#"><img src="images/edit.svg" alt="edit"></a><a href="#"><img src="images/delete.svg" alt="delete"></a></div>':""}\n                </div>\n                </article>\n                `)).join("\n")}}}("tweet");var l;new class{constructor(t){this.containerId=t}display(t){if(!t)return"";const e=document.getElementById(this.containerId);e&&(e.innerHTML=t.map((t=>`\n                <div class="comment">\n                <div class="comment_info">\n                <h1 class="user_name">${t.author}</h1>\n                <time class="comment_date">${c(t.createdAt)}</time>\n                </div>\n                <p class="comments_content">${t.text}</p>\n                <hr>\n                </div>\n            `)).join("\n"))}}("allcomments"),new class{constructor(t){this.containerId=t}display(t){if(!t)return"";const e=document.getElementById(this.containerId);e&&(e.innerHTML=`\n            <div class="user_info">\n            <h1 class="user_name">${t.author}</h1>\n            </div>\n        \n                <div class="twit_date">${c(t.createdAt)}</div>\n                <p>${t.text}</p>\n        \n                <div class="twit_footer">\n                <a href="#">\n                <img src="images/chat.svg" alt="chat">\n                </a>\n                <span class="twit_comment_number">${t.comments?t.comments.length:""}</span>\n                </div>\n            `)}}("selectedtweet"),l="Мария",u.display(l),s.user=l,h.display(d.getPage(0,10)),d.edit("77","New text for my tweet"),h.display(d.getPage(0,10)),function(){let t=document.querySelectorAll("article.twit_area > p");if(t&&t.length)for(let e=0;e<t.length;e+=1)t[e].innerHTML=t[e].innerHTML.replace(/#(\S+)/g,'<span><a href="">#$1</a></span>')}(document)})();